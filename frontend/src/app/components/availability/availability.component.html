
<div>
  <!-- Logo and Hotel Title -->
  <div class="logo-container">
    <img src="assets/l9.jpg" width="auto" height="auto" />
    <div class="text-overlay">
      <div class="hotelName">city</div>
      <div class="casabella">CasaBella</div>
    </div>
  </div>

  <!-- Divider Section -->
  <div class="line-container">
    <div class="line"></div>
    <div class="subdiscover">About hotel name</div>
    <div class="line"></div>
  </div>

  <!-- Hotel Description and Search Criteria -->
  <div class="sub-container">
    <p>hotel description</p>
    <p>Hotel ID: {{ hotelId }}</p>
    <p>Guest Count: {{ guestCount }} | Check-in Date: {{ checkinDate }} | Check-out Date: {{ checkoutDate }}</p>

    <!-- Search Component -->
    <div>
      <app-searchagain
        [guestCount]="guestCount"
        [checkinDate]="checkinDate"
        [checkoutDate]="checkoutDate"
        (searchParametersUpdated)="onSearchParametersUpdated($event)">
      </app-searchagain>
    </div>

    <!-- Seasonal Supplements -->
    <!-- <div *ngIf="seasonalSupplements.length > 0">
      <h3>Seasonal Supplements:</h3>
      <div *ngFor="let supplement of seasonalSupplements">
        <mat-card>
          <p>{{ supplement.supplementName }}</p>
          <p>Price per unit: {{ supplement.pricePerUnit }}</p>
        </mat-card>
      </div>
    </div> -->

    <!-- Available Room Types Table -->
    <div *ngIf="availabilityList.length > 0">
      <h2>Available Room Types</h2>
      <table>
        <thead>
          <tr>
            <th>Room Type</th>
            <th>Available No. of Rooms and Persons</th>
            <th>No. of Rooms</th>
            <th>Guest Count</th>
            <th>Supplements</th>
            <th>Total Price for Rooms</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let availability of availabilityList; let i = index">
            <td>{{ availability.roomtypeName }}</td>
            <td>
              Total rooms: {{ availability.noofRooms }}<br>
              Price per unit: {{ availability.price }}<br>
              Max Guests: {{ availability.maxAdults }}<br>
              <p><b>Available noofROoms: {{availability.availableRooms}}</b></p>
            </td>
            <td>
              <p>Enter number of rooms</p>
              <input 
                type="number" 
                [(ngModel)]="availabilityList[i].selectedRooms" 
                placeholder="Enter No. of Rooms" 
                min="1" 
                max="{{ availability.noofRooms }}" 
              />
              <p>Noof nights = {{noOfNights}}</p>
              <!-- <p>Total Price: {{ (availability.price * (availability.selectedRooms || 0)) }}</p> -->
              <p>
                Total Price: 
                {{ 
                  calculateRoomPrice(
                    availability.price, 
                    availability.selectedRooms || 0, 
                    noOfNights, 
                    availability.markupPercentage
                  ) }}
              </p>
            </td>
            <td>
              <input 
                type="number" 
                [(ngModel)]="availabilityList[i].selectedGuestCount" 
                [placeholder]="guestCount"
                min="1" 
                max="{{ availability.maxAdults }}" 
                required 
              />
            </td>
            <!-- Seasonal Supplements -->
            <!-- <td>
              <div *ngFor="let supplement of supplementCache[availability.seasonId]">
                <p>{{ supplement.supplementName }} ({{ supplement.pricePerUnit }})</p>
                <p>Season id : {{supplement.seasonId}}</p>
                <p>Seasonal supplement id: {{supplement.seasonalSupplementId}}</p>
                <p>Season id : {{availability.seasonId}}</p>
              </div>
            </td>                   -->
            <!-- <td>
              <div *ngFor="let supplement of supplementCache[availability.seasonalRoomtypeId]">
                <label>
                  {{ supplement.supplementName }}<br>
                  <p>Price Per supplement: {{ supplement.pricePerUnit }}</p>
                  Quantity:
                  <input 
                    type="number" 
                    [(ngModel)]="supplement.selectedQuantity" 
                    placeholder="Enter quantity" 
                    min="0"
                  />
                  <p>
                    Total Supplement Price: 
                    {{
                      calculateTotalSupplementPrice(availability.seasonalRoomtypeId)
                    }}
                  </p>
                </label>
              </div>
              <div>
                Markup: {{ availability.markupPercentage }}%
              </div>
            </td>                  -->
            <td>
              <div *ngFor="let supplement of supplementCache[availability.seasonalRoomtypeId]">
                <label>
                  {{ supplement.supplementName }}<br>
                  <p>Price Per supplement: {{ supplement.pricePerUnit }}</p>
                  Quantity:
                  <input 
                    class="supinput"
                    type="number" 
                    [(ngModel)]="supplement.selectedQuantity" 
                    placeholder="Enter quantity" 
                    min="0"
                  />
                </label>
              </div>
            </td>
            <td>
              <p>
                {{ calculateSupplementPrice(availability.seasonalRoomtypeId) }} + 
                {{ 
                  calculateRoomPrice(
                    availability.price, 
                    availability.selectedRooms || 0, 
                    noOfNights, 
                    availability.markupPercentage
                ) }} 
              </p>
                <p>Total Price: 
                  {{ calculateTotalPrice(availability) }}
                </p>                           
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- No Availability Message -->
    <div *ngIf="availabilityList.length === 0">
      <p>No room availability found for the selected criteria.</p>
    </div>

    <!-- Submit Booking Button -->
    <div>
      <button mat-button (click)="onSubmit()">Add to Booking</button>
    </div>

    <div *ngIf="hotelDiscounts && hotelDiscounts.length > 0">
      <p class="discountTitle">Discounts</p>
      <ul>
        <li *ngFor="let discount of hotelDiscounts">
          <p class="discountName"> {{ discount.discountType }}</p>
          <p class="discountDes">{{ discount.description }} - {{discount.discountPercentage}} discount for bookings made {{discount.daysPriorToArrival}} days prior to arrival</p>
        </li>
      </ul>
    </div>    

    <div *ngIf="existingBookingId">
      <button mat-button (click)="onNavigate(existingBookingId)">
        Go to Booking
      </button>
    </div>

    <div *ngIf="eligibleForEarlyBird" class="early-bird-message">
      <p>You are eligible for an Early Bird discount!</p>
    </div>    

  </div>
</div>